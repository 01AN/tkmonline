<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<title>Tkm Online</title>
<script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
<style>
  body, div, p, ul, table, tr, td {
    margin: 0px;
    padding: 0px;
  }
  li {
    margin-bottom: 10px;
  }
  img {
   vertical-align:bottom
  }
  body {
    background-color: peachpuff;
    color: black;
    font-family:Arial,Verdana,"ＭＳ Ｐゴシック","ヒラギノ角ゴ Pro W3", sans-serif;
    font-size: 32px;
  }
  ul {
    list-style: none;
  }
  .app {
    background-color: gray;
  }
  .app .count {
    background-color: white;
    text-align: center;
  }
</style>
</head>
<body>
  <ul style="width: 1000px; margin-left: auto; margin-right: auto; text-align: left;">
    <li style="width: 980px; margin-left: auto; margin-right: auto; text-align: left;"><img src="title.png" /></li>
    <li style="width: 890px; margin-left: auto; margin-right: auto; text-align: left;"><img src="readme.png" /></li>
    <li>
        <table class="app">
          <tr>
            <td rowspan=2><img src="youtube.png" /></td>
            <td><a href="./youtube/1st.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./youtube/2nd.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./youtube/3rd.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./youtube/4th.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./youtube/5th.html" target="_blank"><img src="sheep.png" /></a></td>
          </tr>
          <tr>
            <td id="youtube1" class="count">0</td>
            <td id="youtube2" class="count">0</td>
            <td id="youtube3" class="count">0</td>
            <td id="youtube4" class="count">0</td>
            <td id="youtube5" class="count">0</td>
          </tr>
        </table>
    </li>
    <li>
      <table class="app">
          <tr>
            <td rowspan=2><img src="battleraiso.png" /></td>
            <td><a href="./battleraiso/1st.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./battleraiso/2nd.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./battleraiso/3rd.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./battleraiso/4th.html" target="_blank"><img src="sheep.png" /></a></td>
            <td><a href="./battleraiso/5th.html" target="_blank"><img src="sheep.png" /></a></td>
          </tr>
          <tr>
            <td id="battleraiso1" class="count">0</td>
            <td id="battleraiso2" class="count">0</td>
            <td id="battleraiso3" class="count">0</td>
            <td id="battleraiso4" class="count">0</td>
            <td id="battleraiso5" class="count">0</td>
          </tr>
        </table>
    </li>
  </ul>
  <script>
    var instanceList, ws, instanceIndex;
    var splitForSyntax3 = function(s) {
      return (s.substring(1)).split(' ');
    }
    instanceList = [
      '#youtube1', '#youtube2', '#youtube3', '#youtube4', '#youtube5',
      '#battleraiso1', '#battleraiso2', '#battleraiso3', '#battleraiso4', '#battleraiso5'
    ];
    
    ws = new WebSocket('ws://210.152.156.23:443');
    
    repeet = function() {
      instanceIndex = 0;
      ws.send(String.fromCharCode(instanceIndex) + 'a');
    }
    
    ws.onopen = function() {
      repeet();
    }
    
    ws.onmessage = function(e) {
      var o;
      o = splitForSyntax3(e.data);
      if(o[0] !== '') {
        $(instanceList[instanceIndex]).text(o.length);
      } else {
        $(instanceList[instanceIndex]).text(0);
      }
      instanceIndex++;
      if(instanceIndex < instanceList.length) {
        ws.send(String.fromCharCode(instanceIndex) + 'a');
      } else {
        setTimeout(repeet, 5000);
      }
    }
  </script>
</body>
</html>